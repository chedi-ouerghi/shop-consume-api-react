{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chedi\\\\Desktop\\\\shopcard\\\\shopping\\\\src\\\\contexts\\\\cart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useReducer, createContext, useEffect } from \"react\";\nimport useLocalStorage from \"hooks/useLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  isCartOpen: false,\n  items: []\n};\nexport const CartStateContext = /*#__PURE__*/createContext();\nexport const CartDispatchContext = /*#__PURE__*/createContext();\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"TOGGLE_CART_POPUP\":\n      return {\n        ...state,\n        isCartOpen: !state.isCartOpen\n      };\n    case \"ADD_TO_CART\":\n      const id = action.payload.cartItem.id;\n      const isOld = state.items.map(item => item.id).includes(id);\n      let cartItems = null;\n      if (isOld) {\n        const items = state.items.map(item => {\n          if (item.id === id) {\n            return {\n              ...item,\n              quantity: item.quantity + 1\n            };\n          }\n          return item;\n        });\n        cartItems = [...items];\n      } else {\n        cartItems = [...state.items, action.payload.cartItem];\n      }\n      return {\n        ...state,\n        items: cartItems\n      };\n    case \"REMOVE_FROM_CART\":\n      return {\n        ...state,\n        items: state.items.filter(item => item.id !== action.payload.cartItemId)\n      };\n    case \"CLEAR_CART\":\n      return {\n        ...state,\n        ...initialState\n      };\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n};\nexport const toggleCartPopup = dispatch => {\n  return dispatch({\n    type: \"TOGGLE_CART_POPUP\"\n  });\n};\nexport const addToCart = (dispatch, cartItem) => {\n  return dispatch({\n    type: \"ADD_TO_CART\",\n    payload: {\n      cartItem: cartItem\n    }\n  });\n};\nexport const removeFromCart = (dispatch, cartItemId) => {\n  return dispatch({\n    type: \"REMOVE_FROM_CART\",\n    payload: {\n      cartItemId: cartItemId\n    }\n  });\n};\nexport const clearCart = dispatch => {\n  return dispatch({\n    type: \"CLEAR_CART\"\n  });\n};\nconst CartProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [persistedCartItems, setPersistedCartItems] = useLocalStorage(\"cartItems\", []);\n  const persistedCartState = {\n    isCartOpen: false,\n    items: persistedCartItems || []\n  };\n  const [state, dispatch] = useReducer(reducer, persistedCartState);\n  useEffect(() => {\n    setPersistedCartItems(state.items);\n  }, [JSON.stringify(state.items)]);\n  return /*#__PURE__*/_jsxDEV(CartDispatchContext.Provider, {\n    value: dispatch,\n    children: /*#__PURE__*/_jsxDEV(CartStateContext.Provider, {\n      value: state,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"XP8qSprmRCPk8NXN1Z6i025ETsU=\", false, function () {\n  return [useLocalStorage];\n});\n_c = CartProvider;\nexport default CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","useReducer","createContext","useEffect","useLocalStorage","initialState","isCartOpen","items","CartStateContext","CartDispatchContext","reducer","state","action","type","id","payload","cartItem","isOld","map","item","includes","cartItems","quantity","filter","cartItemId","Error","toggleCartPopup","dispatch","addToCart","removeFromCart","clearCart","CartProvider","children","persistedCartItems","setPersistedCartItems","persistedCartState","JSON","stringify"],"sources":["C:/Users/chedi/Desktop/shopcard/shopping/src/contexts/cart.jsx"],"sourcesContent":["import React, { useReducer, createContext, useEffect } from \"react\";\r\nimport useLocalStorage from \"hooks/useLocalStorage\";\r\n\r\nconst initialState = {\r\n  isCartOpen: false,\r\n  items: []\r\n};\r\n\r\nexport const CartStateContext = createContext();\r\nexport const CartDispatchContext = createContext();\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"TOGGLE_CART_POPUP\":\r\n      return {\r\n        ...state,\r\n        isCartOpen: !state.isCartOpen\r\n      };\r\n    case \"ADD_TO_CART\":\r\n      const id = action.payload.cartItem.id;\r\n      const isOld = state.items.map((item) => item.id).includes(id);\r\n      let cartItems = null;\r\n      if (isOld) {\r\n        const items = state.items.map((item) => {\r\n          if (item.id === id) {\r\n            return {\r\n              ...item,\r\n              quantity: item.quantity + 1\r\n            };\r\n          }\r\n          return item;\r\n        });\r\n        cartItems = [...items];\r\n      } else {\r\n        cartItems = [...state.items, action.payload.cartItem];\r\n      }\r\n      return {\r\n        ...state,\r\n        items: cartItems\r\n      };\r\n    case \"REMOVE_FROM_CART\":\r\n      return {\r\n        ...state,\r\n        items: state.items.filter(\r\n          (item) => item.id !== action.payload.cartItemId\r\n        )\r\n      };\r\n    case \"CLEAR_CART\":\r\n      return {\r\n        ...state,\r\n        ...initialState\r\n      };\r\n    default:\r\n      throw new Error(`Unknown action: ${action.type}`);\r\n  }\r\n};\r\n\r\nexport const toggleCartPopup = (dispatch) => {\r\n  return dispatch({\r\n    type: \"TOGGLE_CART_POPUP\"\r\n  });\r\n};\r\n\r\nexport const addToCart = (dispatch, cartItem) => {\r\n  return dispatch({\r\n    type: \"ADD_TO_CART\",\r\n    payload: {\r\n      cartItem: cartItem\r\n    }\r\n  });\r\n};\r\n\r\nexport const removeFromCart = (dispatch, cartItemId) => {\r\n  return dispatch({\r\n    type: \"REMOVE_FROM_CART\",\r\n    payload: {\r\n      cartItemId: cartItemId\r\n    }\r\n  });\r\n};\r\n\r\nexport const clearCart = (dispatch) => {\r\n  return dispatch({\r\n    type: \"CLEAR_CART\"\r\n  });\r\n};\r\n\r\nconst CartProvider = ({ children }) => {\r\n  const [persistedCartItems, setPersistedCartItems] = useLocalStorage(\r\n    \"cartItems\",\r\n    []\r\n  );\r\n  const persistedCartState = {\r\n    isCartOpen: false,\r\n    items: persistedCartItems || []\r\n  };\r\n  const [state, dispatch] = useReducer(reducer, persistedCartState);\r\n  useEffect(() => {\r\n    setPersistedCartItems(state.items);\r\n  }, [JSON.stringify(state.items)]);\r\n  return (\r\n    <CartDispatchContext.Provider value={dispatch}>\r\n      <CartStateContext.Provider value={state}>\r\n        {children}\r\n      </CartStateContext.Provider>\r\n    </CartDispatchContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}