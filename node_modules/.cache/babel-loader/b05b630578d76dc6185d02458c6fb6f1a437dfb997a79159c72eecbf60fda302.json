{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chedi\\\\Desktop\\\\shopcard\\\\shopping\\\\src\\\\contexts\\\\checkout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useReducer, createContext, useEffect } from \"react\";\nimport useLocalStorage from \"hooks/useLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CHECKOUT_STEPS = {\n  AUTH: \"auth\",\n  SHIPPING: \"shipping\",\n  PAYMENT: \"payment\"\n};\nconst initialState = {\n  step: CHECKOUT_STEPS.AUTH,\n  shippingAddress: null\n};\nexport const CheckoutStateContext = /*#__PURE__*/createContext();\nexport const CheckoutDispatchContext = /*#__PURE__*/createContext();\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_CHECKOUT_STEP\":\n      return {\n        ...state,\n        step: action.payload.step\n      };\n    case \"SET_SHIPPING_ADDRESS\":\n      return {\n        ...state,\n        shippingAddress: action.payload.shippingAddress\n      };\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n};\nconst CheckoutProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [checkoutState, setCheckoutState] = useLocalStorage(\"checkout\", null);\n  const persistedCheckoutState = {\n    ...initialState,\n    shippingAddress: checkoutState || {}\n  };\n  const [state, dispatch] = useReducer(reducer, persistedCheckoutState);\n  useEffect(() => {\n    setCheckoutState(state.shippingAddress);\n  }, [state.shippingAddress]);\n  return /*#__PURE__*/_jsxDEV(CheckoutDispatchContext.Provider, {\n    value: dispatch,\n    children: /*#__PURE__*/_jsxDEV(CheckoutStateContext.Provider, {\n      value: state,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutProvider, \"gSVTdkSpM10RgK2iIUAf4RgD2lk=\", false, function () {\n  return [useLocalStorage];\n});\n_c = CheckoutProvider;\nexport const setCheckoutStep = (dispatch, step) => {\n  return dispatch({\n    type: \"SET_CHECKOUT_STEP\",\n    payload: {\n      step\n    }\n  });\n};\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\n  dispatch({\n    type: \"SET_SHIPPING_ADDRESS\",\n    payload: {\n      shippingAddress\n    }\n  });\n  return setCheckoutStep(dispatch, CHECKOUT_STEPS.PAYMENT);\n};\nexport default CheckoutProvider;\nvar _c;\n$RefreshReg$(_c, \"CheckoutProvider\");","map":{"version":3,"names":["React","useReducer","createContext","useEffect","useLocalStorage","CHECKOUT_STEPS","AUTH","SHIPPING","PAYMENT","initialState","step","shippingAddress","CheckoutStateContext","CheckoutDispatchContext","reducer","state","action","type","payload","Error","CheckoutProvider","children","checkoutState","setCheckoutState","persistedCheckoutState","dispatch","setCheckoutStep","saveShippingAddress"],"sources":["C:/Users/chedi/Desktop/shopcard/shopping/src/contexts/checkout.jsx"],"sourcesContent":["import React, { useReducer, createContext, useEffect } from \"react\";\r\nimport useLocalStorage from \"hooks/useLocalStorage\";\r\n\r\nexport const CHECKOUT_STEPS = {\r\n  AUTH: \"auth\",\r\n  SHIPPING: \"shipping\",\r\n  PAYMENT: \"payment\"\r\n};\r\n\r\nconst initialState = {\r\n  step: CHECKOUT_STEPS.AUTH,\r\n  shippingAddress: null\r\n};\r\n\r\nexport const CheckoutStateContext = createContext();\r\nexport const CheckoutDispatchContext = createContext();\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"SET_CHECKOUT_STEP\":\r\n      return {\r\n        ...state,\r\n        step: action.payload.step\r\n      };\r\n    case \"SET_SHIPPING_ADDRESS\":\r\n      return {\r\n        ...state,\r\n        shippingAddress: action.payload.shippingAddress\r\n      };\r\n    default:\r\n      throw new Error(`Unknown action: ${action.type}`);\r\n  }\r\n};\r\n\r\nconst CheckoutProvider = ({ children }) => {\r\n  const [checkoutState, setCheckoutState] = useLocalStorage(\"checkout\", null);\r\n  const persistedCheckoutState = {\r\n    ...initialState,\r\n    shippingAddress: checkoutState || {}\r\n  };\r\n  const [state, dispatch] = useReducer(reducer, persistedCheckoutState);\r\n\r\n  useEffect(() => {\r\n    setCheckoutState(state.shippingAddress);\r\n  }, [state.shippingAddress]);\r\n  return (\r\n    <CheckoutDispatchContext.Provider value={dispatch}>\r\n      <CheckoutStateContext.Provider value={state}>\r\n        {children}\r\n      </CheckoutStateContext.Provider>\r\n    </CheckoutDispatchContext.Provider>\r\n  );\r\n};\r\n\r\nexport const setCheckoutStep = (dispatch, step) => {\r\n  return dispatch({\r\n    type: \"SET_CHECKOUT_STEP\",\r\n    payload: {\r\n      step\r\n    }\r\n  });\r\n};\r\n\r\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\r\n  dispatch({\r\n    type: \"SET_SHIPPING_ADDRESS\",\r\n    payload: {\r\n      shippingAddress\r\n    }\r\n  });\r\n  return setCheckoutStep(dispatch, CHECKOUT_STEPS.PAYMENT);\r\n};\r\n\r\nexport default CheckoutProvider;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,aAAa,EAAEC,SAAS,QAAQ,OAAO;AACnE,OAAOC,eAAe,MAAM,uBAAuB;AAAC;AAEpD,OAAO,MAAMC,cAAc,GAAG;EAC5BC,IAAI,EAAE,MAAM;EACZC,QAAQ,EAAE,UAAU;EACpBC,OAAO,EAAE;AACX,CAAC;AAED,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAEL,cAAc,CAACC,IAAI;EACzBK,eAAe,EAAE;AACnB,CAAC;AAED,OAAO,MAAMC,oBAAoB,gBAAGV,aAAa,EAAE;AACnD,OAAO,MAAMW,uBAAuB,gBAAGX,aAAa,EAAE;AAEtD,MAAMY,OAAO,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACjC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK,mBAAmB;MACtB,OAAO;QACL,GAAGF,KAAK;QACRL,IAAI,EAAEM,MAAM,CAACE,OAAO,CAACR;MACvB,CAAC;IACH,KAAK,sBAAsB;MACzB,OAAO;QACL,GAAGK,KAAK;QACRJ,eAAe,EAAEK,MAAM,CAACE,OAAO,CAACP;MAClC,CAAC;IACH;MACE,MAAM,IAAIQ,KAAK,CAAE,mBAAkBH,MAAM,CAACC,IAAK,EAAC,CAAC;EAAC;AAExD,CAAC;AAED,MAAMG,gBAAgB,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EACpC,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGnB,eAAe,CAAC,UAAU,EAAE,IAAI,CAAC;EAC3E,MAAMoB,sBAAsB,GAAG;IAC7B,GAAGf,YAAY;IACfE,eAAe,EAAEW,aAAa,IAAI,CAAC;EACrC,CAAC;EACD,MAAM,CAACP,KAAK,EAAEU,QAAQ,CAAC,GAAGxB,UAAU,CAACa,OAAO,EAAEU,sBAAsB,CAAC;EAErErB,SAAS,CAAC,MAAM;IACdoB,gBAAgB,CAACR,KAAK,CAACJ,eAAe,CAAC;EACzC,CAAC,EAAE,CAACI,KAAK,CAACJ,eAAe,CAAC,CAAC;EAC3B,oBACE,QAAC,uBAAuB,CAAC,QAAQ;IAAC,KAAK,EAAEc,QAAS;IAAA,uBAChD,QAAC,oBAAoB,CAAC,QAAQ;MAAC,KAAK,EAAEV,KAAM;MAAA,UACzCM;IAAQ;MAAA;MAAA;MAAA;IAAA;EACqB;IAAA;IAAA;IAAA;EAAA,QACC;AAEvC,CAAC;AAAC,GAlBID,gBAAgB;EAAA,QACsBhB,eAAe;AAAA;AAAA,KADrDgB,gBAAgB;AAoBtB,OAAO,MAAMM,eAAe,GAAG,CAACD,QAAQ,EAAEf,IAAI,KAAK;EACjD,OAAOe,QAAQ,CAAC;IACdR,IAAI,EAAE,mBAAmB;IACzBC,OAAO,EAAE;MACPR;IACF;EACF,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMiB,mBAAmB,GAAG,CAACF,QAAQ,EAAEd,eAAe,KAAK;EAChEc,QAAQ,CAAC;IACPR,IAAI,EAAE,sBAAsB;IAC5BC,OAAO,EAAE;MACPP;IACF;EACF,CAAC,CAAC;EACF,OAAOe,eAAe,CAACD,QAAQ,EAAEpB,cAAc,CAACG,OAAO,CAAC;AAC1D,CAAC;AAED,eAAeY,gBAAgB;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}